# ğŸ—ï¸ RBAC System Architecture

## Complete System Architecture Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        TOURNAMENT MANAGEMENT SYSTEM                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                         â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
                         â•‘   WEB BROWSER              â•‘
                         â•‘ (http://localhost:3000)    â•‘
                         â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                                      â–²
                                      â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                 â”‚                 â”‚
                    â–¼                 â–¼                 â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   PUBLIC USER    â”‚  â”‚  BEFORE LOGIN    â”‚  â”‚   ADMIN USER     â”‚
        â”‚                  â”‚  â”‚                  â”‚  â”‚                  â”‚
        â”‚ â€¢ View home      â”‚  â”‚ â€¢ See login form â”‚  â”‚ â€¢ View home      â”‚
        â”‚ â€¢ View brackets  â”‚  â”‚ â€¢ See public UI  â”‚  â”‚ â€¢ Login with JWT â”‚
        â”‚ â€¢ View teams     â”‚  â”‚ â€¢ No admin UI    â”‚  â”‚ â€¢ Access admin   â”‚
        â”‚ â€¢ View players   â”‚  â”‚ â€¢ Cannot POST    â”‚  â”‚ â€¢ Full CRUD ops  â”‚
        â”‚ â€¢ Read-only      â”‚  â”‚                  â”‚  â”‚ â€¢ Token stored   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚                 â”‚                 â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚    REACT FRONTEND LAYER          â”‚
                    â”‚  (http://localhost:3000)         â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚             â”‚           â”‚           â”‚             â”‚
           â–¼             â–¼           â–¼           â–¼             â–¼
    â•”â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•— â•”â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•— â•”â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•— â•”â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•— â•”â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•—
    â•‘ Router   â•‘ â•‘ Navbar   â•‘ â•‘ Pages    â•‘ â•‘ Admin    â•‘ â•‘ API      â•‘
    â•‘          â•‘ â•‘ (RBAC)   â•‘ â•‘          â•‘ â•‘ (Forms)  â•‘ â•‘ Client   â•‘
    â• â•â•â•â•â•â•â•â•â•â•â•£ â• â•â•â•â•â•â•â•â•â•â•â•£ â• â•â•â•â•â•â•â•â•â•â•â•£ â• â•â•â•â•â•â•â•â•â•â•â•£ â• â•â•â•â•â•â•â•â•â•â•â•£
    â•‘ App.js   â•‘ â•‘ Show/Hideâ•‘ â•‘ Home     â•‘ â•‘ Login    â•‘ â•‘ Axios    â•‘
    â•‘ Routes   â•‘ â•‘ by role  â•‘ â•‘ Teams    â•‘ â•‘ Dashboardâ•‘ â•‘ Interceptor
    â•‘ Protectedâ•‘ â•‘ Dashboardâ•‘ â•‘ Players  â•‘ â•‘ Forms    â•‘ â•‘          â•‘
    â•‘ Routes   â•‘ â•‘ Logout   â•‘ â•‘ Brackets â•‘ â•‘          â•‘ â•‘ +Token   â•‘
    â•šâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â• â•šâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â• â•šâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â• â•šâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â• â•šâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•
           â”‚             â”‚           â”‚           â”‚             â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â”‚ HTTP/HTTPS
                         â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   API REQUESTS & RESPONSES        â”‚
        â”‚  (http://localhost:5000)          â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚             â”‚             â”‚
           â–¼             â–¼             â–¼
    â•”â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•—
    â•‘  EXPRESS.JS BACKEND LAYER            â•‘
    â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
    â•‘                                      â•‘
    â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â•‘
    â•‘  â”‚ ROUTES & CONTROLLERS         â”‚   â•‘
    â•‘  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â•‘
    â•‘  â”‚ GET /api/tournaments         â”‚   â•‘
    â•‘  â”‚ POST /api/tournaments (AUTH) â”‚   â•‘
    â•‘  â”‚ PUT /api/tournaments/:id     â”‚   â•‘
    â•‘  â”‚ DELETE /api/tournaments/:id  â”‚   â•‘
    â•‘  â”‚ ... (teams, players, matches)â”‚   â•‘
    â•‘  â”‚                              â”‚   â•‘
    â•‘  â”‚ POST /api/auth/login (JWT)   â”‚   â•‘
    â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â•‘
    â•‘                                      â•‘
    â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â•‘
    â•‘  â”‚ MIDDLEWARE (AUTHENTICATION)  â”‚   â•‘
    â•‘  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â•‘
    â•‘  â”‚ Check Authorization header   â”‚   â•‘
    â•‘  â”‚ Verify JWT token signature   â”‚   â•‘
    â•‘  â”‚ Check token expiration       â”‚   â•‘
    â•‘  â”‚ Attach admin to request      â”‚   â•‘
    â•‘  â”‚ Return 401 if invalid        â”‚   â•‘
    â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â•‘
    â•‘                                      â•‘
    â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â•‘
    â•‘  â”‚ JWT AUTHENTICATION           â”‚   â•‘
    â•‘  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â•‘
    â•‘  â”‚ Generate: jwt.sign()         â”‚   â•‘
    â•‘  â”‚ Verify: jwt.verify()         â”‚   â•‘
    â•‘  â”‚ Secret: JWT_SECRET env var   â”‚   â•‘
    â•‘  â”‚ Include: admin ID only       â”‚   â•‘
    â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â•‘
    â•‘                                      â•‘
    â•šâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•
                         â”‚
                         â”‚ Mongoose ODM
                         â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   MONGODB DATABASE LAYER         â”‚
        â”‚  (mongodb://127.0.0.1:27017)     â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                                                    â”‚
        â–¼                 â–¼                 â–¼                â–¼
    â•”â”€â”€â”€â”€â”€â”€â”€â”€â”€â•—   â•”â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•—   â•”â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•—   â•”â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•—
    â•‘ Admin   â•‘   â•‘Tournamentsâ•‘   â•‘  Teams   â•‘   â•‘ Players  â•‘
    â•‘ Model  â•‘   â•‘  Model    â•‘   â•‘  Model   â•‘   â•‘  Model   â•‘
    â• â•â•â•â•â•â•â•â•â•â•£   â• â•â•â•â•â•â•â•â•â•â•â•£   â• â•â•â•â•â•â•â•â•â•â•â•£   â• â•â•â•â•â•â•â•â•â•â•â•£
    â•‘username â•‘   â•‘name       â•‘   â•‘name      â•‘   â•‘name      â•‘
    â•‘password â•‘   â•‘gameType   â•‘   â•‘tournamentâ•‘   â•‘team      â•‘
    â•‘(hashed) â•‘   â•‘year       â•‘   â•‘ logo     â•‘   â•‘role      â•‘
    â•‘         â•‘   â•‘location   â•‘   â•‘wins      â•‘   â•‘photo     â•‘
    â•‘         â•‘   â•‘champion   â•‘   â•‘losses    â•‘   â•‘          â•‘
    â•‘         â•‘   â•‘           â•‘   â•‘          â•‘   â•‘          â•‘
    â•šâ”€â”€â”€â”€â”€â”€â”€â”€â”€â•   â•šâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•˜   â•šâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•˜   â•šâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•˜
        â”‚              â”‚              â”‚              â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                    â”Œâ”€â”€â”´â”€â”€â”
                    â”‚ âœ…  â”‚
                    â”‚ All â”‚
                    â”‚ Dataâ”‚
                    â””â”€â”€â”€â”€â”€â”˜
```

---

## Authentication Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    AUTHENTICATION FLOW                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

STEP 1: USER NAVIGATES TO LOGIN
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User visits      â”‚
â”‚ /admin           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AdminRoute Component checks:             â”‚
â”‚ â€¢ isLoggedIn = localStorage.admin == trueâ”‚
â”‚ â€¢ token = localStorage.token exists?     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€â”€â”€ YES (already logged in)â”€â”€â†’ Redirect to /admin/dashboard
         â”‚
         â””â”€â”€â”€ NO (not logged in) â”€â”€â†’ Show Login Form
                                      â”‚
                                      â–¼
                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚ User enters:           â”‚
                         â”‚ Username: admin        â”‚
                         â”‚ Password: khelat...@@  â”‚
                         â”‚ Clicks: Login          â”‚
                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚

STEP 2: LOGIN REQUEST TO BACKEND
                                  â”‚
                                  â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ POST /api/auth/login         â”‚
                    â”‚ {                            â”‚
                    â”‚   username: "admin",         â”‚
                    â”‚   password: "khela..."       â”‚
                    â”‚ }                            â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚ Backend Processing:             â”‚
                â”‚                                 â”‚
                â”‚ 1. Admin.findOne(username)      â”‚
                â”‚    â†’ Found? Continue : 401      â”‚
                â”‚                                 â”‚
                â”‚ 2. bcrypt.compare(password)     â”‚
                â”‚    â†’ Match? Continue : 401      â”‚
                â”‚                                 â”‚
                â”‚ 3. jwt.sign({id: admin._id})    â”‚
                â”‚    â†’ Generate token             â”‚
                â”‚                                 â”‚
                â”‚ 4. Return { token: "eyJh..." }  â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚ Response: 200 OK                â”‚
                â”‚ {                               â”‚
                â”‚   token: "eyJhbGciOiJIUzI1..." â”‚
                â”‚ }                               â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚

STEP 3: STORE TOKEN & REDIRECT
                         â”‚
                         â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Frontend receives token            â”‚
        â”‚                                    â”‚
        â”‚ localStorage.setItem(              â”‚
        â”‚   "token",                         â”‚
        â”‚   "eyJhbGciOiJIUzI1..."           â”‚
        â”‚ )                                  â”‚
        â”‚                                    â”‚
        â”‚ localStorage.setItem(              â”‚
        â”‚   "admin",                         â”‚
        â”‚   "true"                           â”‚
        â”‚ )                                  â”‚
        â”‚                                    â”‚
        â”‚ navigate("/admin/dashboard")       â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Admin Dashboard          â”‚
        â”‚ (Fully functional)        â”‚
        â”‚                          â”‚
        â”‚ Navbar shows:            â”‚
        â”‚ â€¢ ğŸ“Š Dashboard (active)  â”‚
        â”‚ â€¢ ğŸšª Logout button       â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## API Request Protection Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              API REQUEST PROTECTION FLOW                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

AUTHENTICATED REQUEST (Admin)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Admin creates new tournament â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Component calls:     â”‚
    â”‚ API.post(            â”‚
    â”‚   '/tournaments',    â”‚
    â”‚   {...data}          â”‚
    â”‚ )                    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Axios Interceptor triggers:     â”‚
    â”‚                                 â”‚
    â”‚ const token =                   â”‚
    â”‚   localStorage.getItem("token") â”‚
    â”‚                                 â”‚
    â”‚ if (token) {                    â”‚
    â”‚   req.headers.authorization =   â”‚
    â”‚   `Bearer ${token}`             â”‚
    â”‚ }                               â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ HTTP Request sent:                   â”‚
    â”‚ POST http://localhost:5000/api/...   â”‚
    â”‚                                      â”‚
    â”‚ Headers:                             â”‚
    â”‚ Authorization: Bearer eyJhbGc...     â”‚
    â”‚ Content-Type: application/json       â”‚
    â”‚                                      â”‚
    â”‚ Body:                                â”‚
    â”‚ { name: "Tournament", ... }          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Backend: Express Route                   â”‚
    â”‚ router.post("/tournaments", auth, ...)   â”‚
    â”‚                                          â”‚
    â”‚ â€¢ Route receives request                 â”‚
    â”‚ â€¢ Passes through 'auth' middleware       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Auth Middleware Validates:               â”‚
    â”‚                                          â”‚
    â”‚ 1. Check Authorization header            â”‚
    â”‚    âœ… Header found? Continue             â”‚
    â”‚    âŒ No header? Return 401              â”‚
    â”‚                                          â”‚
    â”‚ 2. Extract token (remove "Bearer ")      â”‚
    â”‚    token = "eyJhbGc..."                  â”‚
    â”‚                                          â”‚
    â”‚ 3. Verify token signature                â”‚
    â”‚    jwt.verify(token, JWT_SECRET)         â”‚
    â”‚    âœ… Valid? Continue                    â”‚
    â”‚    âŒ Invalid? Return 401                â”‚
    â”‚                                          â”‚
    â”‚ 4. Check expiration                      â”‚
    â”‚    âœ… Not expired? Continue              â”‚
    â”‚    âŒ Expired? Return 401                â”‚
    â”‚                                          â”‚
    â”‚ 5. Attach admin info                     â”‚
    â”‚    req.admin = decoded JWT payload       â”‚
    â”‚                                          â”‚
    â”‚ 6. Call next()                           â”‚
    â”‚    Pass to route controller              â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Route Controller:                        â”‚
    â”‚ Create tournament in database            â”‚
    â”‚ Return 200 OK with created tournament    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Frontend receives 200 OK:                â”‚
    â”‚ Tournament created successfully!         â”‚
    â”‚ Update UI with new tournament            â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


UNAUTHENTICATED REQUEST (Public User)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Public user tries to create â”‚
â”‚ tournament directly via:     â”‚
â”‚ fetch('/api/tournaments', { â”‚
â”‚   method: 'POST',           â”‚
â”‚   body: {...}               â”‚
â”‚ })                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ HTTP Request sent:                       â”‚
    â”‚ POST http://localhost:5000/api/...       â”‚
    â”‚                                          â”‚
    â”‚ Headers:                                 â”‚
    â”‚ Content-Type: application/json           â”‚
    â”‚ âŒ NO Authorization header!              â”‚
    â”‚                                          â”‚
    â”‚ Body:                                    â”‚
    â”‚ { name: "Tournament", ... }              â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Backend: Auth Middleware                 â”‚
    â”‚                                          â”‚
    â”‚ 1. Check Authorization header            â”‚
    â”‚    âŒ NOT FOUND!                         â”‚
    â”‚                                          â”‚
    â”‚ 2. Return 401 Unauthorized               â”‚
    â”‚    {                                     â”‚
    â”‚      msg: "No authorization token",      â”‚
    â”‚      code: "NO_TOKEN"                    â”‚
    â”‚    }                                     â”‚
    â”‚                                          â”‚
    â”‚ 3. Middleware stops execution            â”‚
    â”‚    Route handler NOT called              â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Frontend receives 401 Unauthorized       â”‚
    â”‚ Request denied!                          â”‚
    â”‚ No tournament created                    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Route Protection Component Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ROUTE PROTECTION LOGIC                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ProtectedRoute Component (Admin Routes)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ <ProtectedRoute>                                             â”‚
â”‚   <AdminDashboard />                                         â”‚
â”‚ </ProtectedRoute>                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Component Logic:                         â”‚
    â”‚                                          â”‚
    â”‚ const isLoggedIn =                       â”‚
    â”‚   localStorage.getItem("admin") === trueâ”‚
    â”‚                                          â”‚
    â”‚ const token =                            â”‚
    â”‚   localStorage.getItem("token")          â”‚
    â”‚                                          â”‚
    â”‚ if (!isLoggedIn || !token) {             â”‚
    â”‚   return <Navigate to="/" />             â”‚
    â”‚ }                                        â”‚
    â”‚                                          â”‚
    â”‚ return children                          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚               â”‚
        â–¼               â–¼
    âœ… PASS         âŒ FAIL
    â”‚               â”‚
    â”œâ”€ admin===true â”œâ”€ admin !== "true" OR
    â”œâ”€ token exists â”œâ”€ token missing
    â”‚               â”‚
    â–¼               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Render      â”‚ â”‚ Navigate to  â”‚
â”‚ Dashboard   â”‚ â”‚ Home (/)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


AdminRoute Component (Login Page)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ <Route path="/admin">                                        â”‚
â”‚   <AdminRoute>                                               â”‚
â”‚     <AdminLogin />                                           â”‚
â”‚   </AdminRoute>                                              â”‚
â”‚ </Route>                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Component Logic:                         â”‚
    â”‚                                          â”‚
    â”‚ const isLoggedIn =                       â”‚
    â”‚   localStorage.getItem("admin") === trueâ”‚
    â”‚                                          â”‚
    â”‚ const token =                            â”‚
    â”‚   localStorage.getItem("token")          â”‚
    â”‚                                          â”‚
    â”‚ if (isLoggedIn && token) {               â”‚
    â”‚   return <Navigate to="/admin/dashboard" â”‚
    â”‚ }                                        â”‚
    â”‚                                          â”‚
    â”‚ return children                          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚               â”‚
        â–¼               â–¼
    âŒ FAIL         âœ… PASS
    â”‚               â”‚
    â”œâ”€ admin===true â”œâ”€ admin !== "true" OR
    â”œâ”€ token exists â”œâ”€ token missing
    â”‚               â”‚
    â–¼               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Navigate to     â”‚ â”‚ Render       â”‚
â”‚ /admin/dashboardâ”‚ â”‚ Login Form   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


App.js Initialization (Corruption Detection)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ useEffect(() => {                                            â”‚
â”‚   const admin = localStorage.getItem("admin")                â”‚
â”‚   const token = localStorage.getItem("token")                â”‚
â”‚                                                              â”‚
â”‚   // If one exists but not the other (corrupted state)       â”‚
â”‚   if ((admin && !token) || (!admin && token)) {              â”‚
â”‚     localStorage.removeItem("token")                         â”‚
â”‚     localStorage.removeItem("admin")                         â”‚
â”‚   }                                                          â”‚
â”‚ }, [])                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”
        â”‚      â”‚      â”‚
        â–¼      â–¼      â–¼
    Case 1 Case 2 Case 3
    â”‚      â”‚      â”‚
    â”œâ”€ âœ… â”œâ”€ âœ… â”œâ”€ âœ…
    â”‚      â”‚      â”‚
    â–¼      â–¼      â–¼
Both   Both   Both
OK     Cleared Missing
```

---

## localStorage State Management

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              LOCAL STORAGE STATE MANAGEMENT                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

STATES:

1ï¸âƒ£ PUBLIC USER (Not Logged In)
   localStorage = {
     token: (empty)
     admin: (empty)
   }
   
   Navbar shows: ğŸ” Admin (login button)
   Routes: Only public pages accessible


2ï¸âƒ£ DURING LOGIN
   User enters credentials â†’ POST /api/auth/login
   
   Response: { token: "eyJhbGc..." }
   
   Frontend sets:
   localStorage.token = "eyJhbGc..."
   localStorage.admin = "true"


3ï¸âƒ£ ADMIN USER (Logged In)
   localStorage = {
     token: "eyJhbGc...",
     admin: "true"
   }
   
   Navbar shows: ğŸ“Š Dashboard + ğŸšª Logout
   Routes: All public + admin routes accessible
   API: Token auto-included in all requests


4ï¸âƒ£ LOGOUT PROCESS
   handleLogout() called
   
   localStorage.removeItem("token")
   localStorage.removeItem("admin")
   
   Result: Back to PUBLIC USER state


5ï¸âƒ£ CORRUPTION DETECTED
   If: (admin exists && !token) OR (!admin && token)
   
   App.js initialization runs corruption fix:
   localStorage.removeItem("token")
   localStorage.removeItem("admin")
   
   Result: Back to PUBLIC USER state (clean)


VALIDATION CHECKS:

Navbar validates:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ useEffect(() => {                   â”‚
â”‚   const adminFlag =                 â”‚
â”‚     localStorage.getItem("admin")    â”‚
â”‚     === "true"                       â”‚
â”‚                                     â”‚
â”‚   const token =                      â”‚
â”‚     localStorage.getItem("token")    â”‚
â”‚                                     â”‚
â”‚   // BOTH must be true              â”‚
â”‚   setIsAdmin(                        â”‚
â”‚     adminFlag && token ? true : falseâ”‚
â”‚   )                                 â”‚
â”‚ }, [location]) // Re-check on nav   â”‚
â”‚                                     â”‚
â”‚ â€¢ Only set to true if BOTH exist    â”‚
â”‚ â€¢ Re-validates on route change      â”‚
â”‚ â€¢ Public pages trigger admin=false  â”‚
â”‚ â€¢ Admin pages trigger admin=true    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ProtectedRoute validates:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ const isLoggedIn =                    â”‚
â”‚   localStorage.getItem("admin") === "true"
â”‚                                       â”‚
â”‚ const token =                         â”‚
â”‚   localStorage.getItem("token")       â”‚
â”‚                                       â”‚
â”‚ if (!isLoggedIn || !token) {          â”‚
â”‚   return <Navigate to="/" />          â”‚
â”‚ }                                     â”‚
â”‚                                       â”‚
â”‚ â€¢ Blocks if admin !== "true"          â”‚
â”‚ â€¢ Blocks if token is empty           â”‚
â”‚ â€¢ Redirects to home page              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Component Hierarchy

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         APP COMPONENT                           â”‚
â”‚  (Routes, ProtectedRoute, AdminRoute, useEffect for validation) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                     â”‚
        â–¼                     â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Navbar    â”‚       â”‚  Footer    â”‚
    â”‚  (RBAC UI) â”‚       â”‚            â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â””â”€â”€â”€ Conditional Rendering:
             â€¢ Admin logged in â†’ Dashboard + Logout
             â€¢ Public user â†’ Admin login button
             â€¢ Mobile menu respects RBAC


        â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  ROUTES & PAGES                 â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚                                 â”‚
    â”‚ PUBLIC ROUTES:                  â”‚
    â”‚ â”œâ”€ / (Home)                     â”‚
    â”‚ â”œâ”€ /tournaments                 â”‚
    â”‚ â”œâ”€ /tournament/:id              â”‚
    â”‚ â”œâ”€ /bracket/:id                 â”‚
    â”‚ â”œâ”€ /teams                       â”‚
    â”‚ â””â”€ /players                     â”‚
    â”‚                                 â”‚
    â”‚ AUTH ROUTES:                    â”‚
    â”‚ â”œâ”€ /admin (Login)               â”‚
    â”‚ â”‚  â””â”€ AdminRoute component      â”‚
    â”‚ â”‚                               â”‚
    â”‚ â””â”€ Admin CRUD (Protected):      â”‚
    â”‚    â”œâ”€ /admin/dashboard          â”‚
    â”‚    â”œâ”€ /admin/tournament         â”‚
    â”‚    â”œâ”€ /admin/team               â”‚
    â”‚    â”œâ”€ /admin/player             â”‚
    â”‚    â””â”€ /admin/match              â”‚
    â”‚    All use ProtectedRoute       â”‚
    â”‚                                 â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


ADMIN PAGES HIERARCHY:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AdminDashboard                       â”‚
â”‚ (Shows CRUD buttons and statistics)  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”œâ”€ TournamentForm (Create/Edit)      â”‚
â”‚ â”œâ”€ TeamForm (Create/Edit)            â”‚
â”‚ â”œâ”€ PlayerForm (Create/Edit)          â”‚
â”‚ â””â”€ MatchForm (Create/Edit)           â”‚
â”‚                                      â”‚
â”‚ All protected with ProtectedRoute    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Security Layers

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              SECURITY LAYERS (Defense in Depth)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

LAYER 1: FRONTEND ROUTE PROTECTION
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ProtectedRoute Component             â”‚
â”‚ â”œâ”€ Checks admin flag in localStorage â”‚
â”‚ â”œâ”€ Checks token in localStorage      â”‚
â”‚ â”œâ”€ Requires BOTH to be present       â”‚
â”‚ â””â”€ Redirects to home if fails        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
LAYER 2: FRONTEND UI RENDERING
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Conditional Rendering in Components  â”‚
â”‚ â”œâ”€ Navbar: Show/hide admin buttons   â”‚
â”‚ â”œâ”€ Bracket: Show/hide delete buttons â”‚
â”‚ â”œâ”€ isAdmin check before rendering    â”‚
â”‚ â””â”€ Public pages have zero admin UI   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
LAYER 3: API INTERCEPTOR
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Axios Interceptor (Auto-Token)       â”‚
â”‚ â”œâ”€ Gets token from localStorage      â”‚
â”‚ â”œâ”€ Adds Authorization header         â”‚
â”‚ â”œâ”€ Uses Bearer token format          â”‚
â”‚ â””â”€ Automatically on all requests     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
LAYER 4: SERVER-SIDE ROUTE PROTECTION
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Express Route with auth Middleware   â”‚
â”‚ router.post('/path', auth, handler)  â”‚
â”‚ â”œâ”€ Middleware runs before handler    â”‚
â”‚ â”œâ”€ Token must be valid to proceed    â”‚
â”‚ â”œâ”€ 401 if token missing/invalid      â”‚
â”‚ â””â”€ Handler never reached if auth failsâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
LAYER 5: TOKEN VALIDATION
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Auth Middleware (JWT Validation)     â”‚
â”‚ â”œâ”€ Check Authorization header        â”‚
â”‚ â”œâ”€ Extract token (remove Bearer)     â”‚
â”‚ â”œâ”€ Verify signature with JWT_SECRET  â”‚
â”‚ â”œâ”€ Check expiration time             â”‚
â”‚ â”œâ”€ Attach admin info to request      â”‚
â”‚ â””â”€ Reject with 401 if any step fails â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
LAYER 6: PASSWORD SECURITY
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ bcryptjs Password Hashing            â”‚
â”‚ â”œâ”€ 10-round salt applied             â”‚
â”‚ â”œâ”€ Never stored in plaintext         â”‚
â”‚ â”œâ”€ Constant-time comparison          â”‚
â”‚ â”œâ”€ Timing attack resistant           â”‚
â”‚ â””â”€ Automatically applied on save     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
LAYER 7: ENVIRONMENT SECURITY
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ .env File & .gitignore               â”‚
â”‚ â”œâ”€ JWT_SECRET stored securely        â”‚
â”‚ â”œâ”€ Database credentials protected    â”‚
â”‚ â”œâ”€ Admin password in MongoDB (hashed)â”‚
â”‚ â”œâ”€ Not committed to Git              â”‚
â”‚ â””â”€ Environment-specific              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ATTACK PROTECTION:
âœ… XSS: Token in localStorage (httpOnly would be better for prod)
âœ… CSRF: JWT tokens (not vulnerable to CSRF)
âœ… Session Hijacking: Token validation on every request
âœ… Brute Force: Could add rate limiting (recommended for prod)
âœ… SQL Injection: Using MongoDB (no SQL)
âœ… Timing Attacks: bcryptjs constant-time comparison
âœ… Privilege Escalation: Token-based role verification
âœ… Token Tampering: JWT signature verification
```

---

**This architecture provides enterprise-grade security with multiple defensive layers!** ğŸ›¡ï¸ğŸ†
